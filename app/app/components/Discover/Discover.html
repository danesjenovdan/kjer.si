<Page ref="pageRef" class="page">
  <AbsoluteLayout ref="mapContainer" width="100%" height="100%">
    <MapView :latitude="location.latitude"
             :longitude="location.longitude"
             :zoom="zoom"
             :minZoom="minZoom"
             :maxZoom="maxZoom"
             width="100%"
             height="100%"
             @cameraChanged="onCameraChanged"
             @mapReady="onMapReady"
             @coordinateTapped="onCoordinateTapped"></MapView>

    <!-- ROOM CREATE CENTER PIN -->
    <Image src="~/assets/images/create_group_pin.png" width="40" height="40" stretch="aspectFit"
           v-if="currentPageState === PAGE_STATES.CREATE"
           :translateX="screenWidth/2-6" :translateY="screenHeight/2-41"></Image>

    <!-- ROOM CREATE TITLE -->
    <GridLayout v-show="currentPageState === PAGE_STATES.CREATE" v-shadow="15" columns="60, *, 60"
                class="create-group-header-container" width="100%">
      <StackLayout @tap="onCloseCreateRoom" col="0" verticalAlignment="center" horizontalAlignment="center" width="40"
                   height="40">
        <Image src="~/assets/images/close_icon.png" width="20" height="20" stretch="aspectFit"></Image>
      </StackLayout>
      <Label class="create-group-title" col="1" textAlignment="center" text="Ustvari sobo"
             verticalAlignment="center"></Label>
    </GridLayout>

    <!-- ROOM CREATE SLIDER PANEL -->
    <StackLayout v-if="currentPageState === PAGE_STATES.CREATE" v-shadow="15" @tap="catchGestureTap"
                 class="create-group-range-panel" :translateY="screenHeight-150" width="100%" height="150">
      <Label text="Nastavi razdaljo" class="create-group-range-title"></Label>
      <StackLayout padding="0 20" marginTop="10">
        <Slider :value="newRoom.radius" @valueChange="onSliderValueChange" minValue="100" maxValue="500" verticalAlignment="center" color="#22AC9B"
                backgroundColor="#22AC9B">
        </Slider>
      </StackLayout>
      <GridLayout columns="*,*,*" width="100%" padding="5 20" height="30">
        <Label class="create-group-range-slider-label" col="0" text="100" textAlignment="left"></Label>
        <Label class="create-group-range-slider-label" col="1" text="metrov" textAlignment="center"></Label>
        <Label class="create-group-range-slider-label" col="2" text="500" textAlignment="right"></Label>
      </GridLayout>
      <Label @tap="confirmRangeTap" class="kjer-si-big-button" text="Potrdi" margin="0 10"></Label>
    </StackLayout>

    <!-- FLOATING COMPONENTS -->
    <MapListPopover @closeListTap="onCloseListTap" v-if="currentPageState === PAGE_STATES.LIST"></MapListPopover>
    <MapFabs @listTap="onListTap" @createTap="onCreateTap" v-if="currentPageState === PAGE_STATES.MAP"
             :translateX="screenWidth - 75" :translateY="screenHeight - 170 - 140"></MapFabs>
    <MapCard v-show="currentPageState === PAGE_STATES.MAP" @tap="onCardTap" :translateY="screenHeight - 170"></MapCard>
  </AbsoluteLayout>
</Page>
